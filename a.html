<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Roleta Russa IA</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Roboto:wght@400;700&display=swap');
        
        :root {
            --dark-bg: #121212;
            --panel-bg: #1e1e1e;
            --accent-red: #cc0000;
            --accent-gold: #d4af37;
            --text-light: #f0f0f0;
            --text-secondary: #a0a0a0;
            --green: #00cc66;
            --blue: #3498db;
            --purple: #9b59b6;
            --orange: #e67e22;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background: var(--dark-bg);
            color: var(--text-light);
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background-image: radial-gradient(circle at center, #333333 0%, #111111 100%);
            overflow-x: hidden;
        }
        
        /* Tema padr√£o - Dark */
        body.theme-dark {
            background-image: radial-gradient(circle at center, #333333 0%, #111111 100%);
        }
        
        /* Tema Western */
        body.theme-western {
            background-image: url('https://cdnjs.cloudflare.com/ajax/libs/img/old-paper.jpg');
            background-color: #8B4513;
        }
        
        body.theme-western #game {
            background: rgba(139, 69, 19, 0.8);
            border: 2px solid #5b2d0c;
        }
        
        body.theme-western .card-front {
            background: linear-gradient(135deg, #8B4513, #5b2d0c);
            border: 2px solid #3e1f08;
        }
        
        body.theme-western h1 {
            font-family: 'Black Ops One', cursive;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        
        /* Tema Futurista */
        body.theme-future {
            background-image: linear-gradient(to bottom, #0f0c29, #24243e, #302b63);
        }
        
        body.theme-future #game {
            background: rgba(36, 36, 62, 0.8);
            border: 2px solid #4444aa;
            box-shadow: 0 0 20px rgba(66, 134, 244, 0.5);
        }
        
        body.theme-future .card-front {
            background: linear-gradient(135deg, #24243e, #0f0c29);
            border: 2px solid #4444aa;
            box-shadow: 0 0 10px rgba(66, 134, 244, 0.3);
        }
        
        body.theme-future h1 {
            color: #42f4e2;
            text-shadow: 0 0 10px rgba(66, 244, 226, 0.7);
        }
        
        body.theme-future .bullet {
            box-shadow: 0 0 5px #42f4e2;
        }
        
        /* Tema Cyberpunk */
        body.theme-cyber {
            background-image: linear-gradient(to bottom right, #4a0072, #7700b3, #00d4ff);
        }
        
        body.theme-cyber #game {
            background: rgba(74, 0, 114, 0.8);
            border: 2px solid #ff00f7;
            box-shadow: 0 0 20px rgba(255, 0, 247, 0.5);
        }
        
        body.theme-cyber .card-front {
            background: linear-gradient(135deg, #4a0072, #7700b3);
            border: 2px solid #ff00f7;
            box-shadow: 0 0 10px rgba(255, 0, 247, 0.3);
        }
        
        body.theme-cyber h1 {
            color: #ff00f7;
            text-shadow: 0 0 10px rgba(255, 0, 247, 0.7);
        }
        
        #game {
            max-width: 800px;
            width: 100%;
            margin: auto;
            padding: 30px;
            border-radius: 15px;
            background: var(--panel-bg);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            border: 1px solid #333;
            display: none;
        }
        
        #game::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-gold), var(--accent-red));
        }
        
        h1 {
            font-family: 'Black Ops One', cursive;
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--accent-red);
            text-shadow: 0 0 10px rgba(204, 0, 0, 0.5);
            letter-spacing: 2px;
        }
        
        .game-board {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            gap: 20px;
        }
        
        .stat-panel {
            flex: 1;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #333;
            text-align: left;
            position: relative;
        }
        
        .stat-panel h3 {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .health-bar {
            height: 25px;
            background: #333;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
            position: relative;
        }
        
        #playerHealthBar, #aiHealthBar {
            height: 100%;
            background: linear-gradient(90deg, #f00, #ff5500);
            width: 100%;
            transition: width 0.3s ease;
        }
        
        .health-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            font-size: 0.9rem;
        }
        
        .revolver-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }
        
        .chamber-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 10px 0;
        }
        
        .bullet {
            width: 30px;
            height: 30px;
            background: #333;
            border-radius: 50%;
            border: 2px solid #444;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
            font-weight: bold;
            transition: transform 0.3s;
        }
        
        .bullet.current {
            border-color: var(--accent-gold);
            box-shadow: 0 0 10px var(--accent-gold);
        }
        
        .bullet.shot {
            animation: bulletShot 0.5s forwards;
        }
        
        @keyframes bulletShot {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(0); opacity: 0; }
        }
        
        .cards-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .card {
            position: relative;
            width: 90px;
            height: 120px;
            perspective: 1000px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.3s;
        }
        
        .card-inner {
            width: 100%;
            height: 100%;
            border-radius: 10px;
            transform-style: preserve-3d;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .card:hover .card-inner {
            transform: translateY(-5px);
        }
        
        .card-front {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #2c2c2c, #1a1a1a);
            border: 2px solid #444;
            padding: 10px;
            color: white;
        }
        
        .card-icon {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .card-name {
            font-size: 0.8rem;
            text-align: center;
        }
        
        .x2Dmg .card-icon { color: var(--accent-red); }
        .PlusVida .card-icon { color: var(--green); }
        .Skip .card-icon { color: var(--blue); }
        .RemoveBullet .card-icon { color: var(--orange); }
        .FutureVision .card-icon { color: var(--purple); }
        
        .card.used {
            animation: cardUsed 0.5s forwards;
        }
        
        @keyframes cardUsed {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(-100px) rotate(10deg); opacity: 0; }
        }
        
        .disabled {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .button-row {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-family: 'Roboto', sans-serif;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        #shootEnemy {
            background: var(--accent-red);
            color: white;
            box-shadow: 0 4px 0 darkred;
        }
        
        #shootEnemy:hover {
            background: #ff0000;
        }
        
        #shootSelf {
            background: #333;
            color: white;
            box-shadow: 0 4px 0 #111;
        }
        
        #shootSelf:hover {
            background: #444;
        }
        
        #newGame {
            background: var(--accent-gold);
            color: #111;
            box-shadow: 0 4px 0 #b8860b;
        }
        
        #newGame:hover {
            background: #ffd700;
        }
        
        #pauseGame {
            background: var(--blue);
            color: white;
            box-shadow: 0 4px 0 #2980b9;
        }
        
        #pauseGame:hover {
            background: #3aa3e3;
        }
        
        #log {
            height: 180px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            text-align: left;
            border-radius: 8px;
            border: 1px solid #333;
            margin-top: 20px;
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--text-secondary);
        }
        
        #log b {
            color: var(--text-light);
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px dotted #333;
        }
        
        .damage {
            color: var(--accent-red);
            font-weight: bold;
        }
        
        .heal {
            color: var(--green);
            font-weight: bold;
        }
        
        .score {
            color: var(--accent-gold);
            font-weight: bold;
        }
        
        .active-effect {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            margin: 0 5px;
            font-size: 0.8rem;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .effect-x2Dmg {
            background: rgba(204,0,0,0.2);
            border-color: rgba(204,0,0,0.4);
            color: #ff5555;
        }
        
        /* Modais */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 999;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--panel-bg);
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            border: 1px solid #444;
            position: relative;
            animation: modalAppear 0.3s forwards;
        }
        
        @keyframes modalAppear {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .modal-content h2 {
            font-family: 'Black Ops One', cursive;
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .modal-content .button-row {
            margin-top: 30px;
        }
        
        /* Efeito de pausa */
        .paused .bullet, 
        .paused .card,
        .paused button:not(#pauseGame) {
            pointer-events: none;
            filter: grayscale(70%);
        }
        
        .paused::after {
            content: 'PAUSADO';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Black Ops One', cursive;
            font-size: 4rem;
            color: rgba(255,255,255,0.8);
            text-shadow: 0 0 20px rgba(0,0,0,0.8);
            z-index: 10;
        }
        
        /* Tela de in√≠cio */
        #startScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }
        
        #startScreen h1 {
            font-size: 4rem;
            margin-bottom: 30px;
        }
        
        .difficulty-selector {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .difficulty-option {
            padding: 15px 25px;
            background: #333;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .difficulty-option:hover {
            transform: translateY(-5px);
            background: #444;
        }
        
        .difficulty-option.selected {
            border-color: var(--accent-gold);
            background: #444;
        }
        
        .difficulty-option h3 {
            font-family: 'Black Ops One', cursive;
            margin-bottom: 10px;
            color: var(--text-light);
        }
        
        .difficulty-option p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .theme-selector {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .theme-option {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            border: 3px solid transparent;
            overflow: hidden;
        }
        
        .theme-option:hover {
            transform: scale(1.1);
        }
        
        .theme-option.selected {
            border-color: var(--accent-gold);
        }
        
        .theme-dark-preview {
            background: linear-gradient(135deg, #333333, #111111);
            width: 100%;
            height: 100%;
        }
        
        .theme-western-preview {
            background: linear-gradient(135deg, #8B4513, #5b2d0c);
            width: 100%;
            height: 100%;
        }
        
        .theme-future-preview {
            background: linear-gradient(135deg, #0f0c29, #302b63);
            width: 100%;
            height: 100%;
        }
        
        .theme-cyber-preview {
            background: linear-gradient(135deg, #4a0072, #00d4ff);
            width: 100%;
            height: 100%;
        }
        
        /* Placar */
        #scoreboardScreen {
            max-width: 800px;
            width: 100%;
            display: none;
        }
        
        .scoreboard-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .scoreboard-table th,
        .scoreboard-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        
        .scoreboard-table th {
            background: rgba(0, 0, 0, 0.2);
            color: var(--accent-gold);
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }
        
        .scoreboard-table tr:last-child td {
            border-bottom: none;
        }
        
        .scoreboard-table tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }
        
        /* Notifica√ß√µes e HUD */
        .game-notification {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 20px 30px;
            border-radius: 10px;
            font-size: 1.5rem;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            text-align: center;
            width: 80%;
            max-width: 400px;
            border: 2px solid var(--accent-gold);
        }
        
        .active-effects-display {
            margin: 10px 0;
            text-align: center;
        }
        
        .score-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid var(--accent-gold);
            font-family: 'Black Ops One', cursive;
            color: var(--accent-gold);
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @media (max-width: 768px) {
            .stats-container {
                flex-direction: column;
            }
            
            .button-row {
                flex-direction: column;
            }
            
            .card {
                width: 80px;
                height: 110px;
            }
            
            .difficulty-selector,
            .theme-selector {
                flex-direction: column;
            }
        }
    </style>
</head>
<body class="theme-dark">
    <!-- Tela Inicial -->
    <div id="startScreen">
        <h1>Roleta Russa vs IA</h1>
        <p>Teste sua sorte contra a intelig√™ncia artificial</p>
        
        <div class="difficulty-selector">
            <div class="difficulty-option" data-difficulty="easy">
                <h3>F√°cil</h3>
                <p>IA menos agressiva<br>Mais cartas<br>Menos balas verdadeiras</p>
            </div>
            <div class="difficulty-option selected" data-difficulty="medium">
                <h3>M√©dio</h3>
                <p>IA equilibrada<br>Cartas moderadas<br>Balas balanceadas</p>
            </div>
            <div class="difficulty-option" data-difficulty="hard">
                <h3>Dif√≠cil</h3>
                <p>IA agressiva<br>Poucas cartas<br>Mais balas verdadeiras</p>
            </div>
        </div>
        
        <h3>Escolha seu tema</h3>
        <div class="theme-selector">
            <div class="theme-option selected" data-theme="dark">
                <div class="theme-dark-preview"></div>
            </div>
            <div class="theme-option" data-theme="western">
                <div class="theme-western-preview"></div>
            </div>
            <div class="theme-option" data-theme="future">
                <div class="theme-future-preview"></div>
            </div>
            <div class="theme-option" data-theme="cyber">
                <div class="theme-cyber-preview"></div>
            </div>
        </div>
        
        <div class="button-row">
            <button id="startGameBtn"><i class="fas fa-play"></i> Iniciar Jogo</button>
            <button id="showScoreboardBtn"><i class="fas fa-trophy"></i> Placar</button>
        </div>
    </div>
    
    <!-- Tela do Placar -->
    <div id="scoreboardScreen">
        <h1>Melhores Pontua√ß√µes</h1>
        
        <table class="scoreboard-table">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>Data</th>
                    <th>Dificuldade</th>
                    <th>Pontua√ß√£o</th>
                    <th>Rodadas</th>
                    <th>Resultado</th>
                </tr>
            </thead>
            <tbody id="scoreboardTableBody">
                <!-- Preenchido por JavaScript -->
            </tbody>
        </table>
        
        <div class="button-row">
            <button id="backToMenuBtn"><i class="fas fa-arrow-left"></i> Voltar ao Menu</button>
        </div>
    </div>
    
    <!-- Tela do Jogo -->
    <div id="game">
        <h1>Roleta Russa vs IA</h1>
        
        <div class="active-effects-display" id="activeEffects"></div>
        <div class="score-display">Pontos: <span id="currentScore">0</span></div>
        
        <div class="game-board">
            <div class="stats-container">
                <div class="stat-panel">
                    <h3>Voc√™</h3>
                    <div class="health-bar">
                        <div id="playerHealthBar"></div>
                        <div class="health-text"><span id="playerHealth">0</span> HP</div>
                    </div>
                </div>
                
                <div class="stat-panel">
                    <h3>IA</h3>
                    <div class="health-bar">
                        <div id="aiHealthBar"></div>
                        <div class="health-text"><span id="aiHealth">0</span> HP</div>
                    </div>
                </div>
            </div>
            
            <div class="stats-container">
                <div class="stat-panel">
                    <h3>Balas no tambor</h3>
                    <div id="bulletsDisplay"><span id="bulletsLeft">0</span></div>
                </div>
                
                <div class="stat-panel">
                    <h3>Rodada</h3>
                    <div id="roundNumber">0</div>
                </div>
            </div>
            
            <div class="revolver-section">
                <h3>Tambor</h3>
                <div class="chamber-container" id="chamberDisplay"></div>
            </div>
            
            <div class="cards-container" id="cards"></div>
            
            <div class="button-row">
                <button id="shootEnemy"><i class="fas fa-bullseye"></i> Atirar no Oponente</button>
                <button id="shootSelf"><i class="fas fa-skull"></i> Atirar em Si</button>
                <button id="pauseGame"><i class="fas fa-pause"></i> Pausar</button>
                <button id="newGame"><i class="fas fa-sync-alt"></i> Novo Jogo</button>
            </div>
            
            <div id="log"></div>
        </div>
        
        <div class="game-notification" id="notification"></div>
    </div>
    
    <!-- Modal de Fim de Jogo -->
    <div id="gameOverModal" class="modal">
        <div class="modal-content">
            <h2 id="gameOverTitle">Fim de Jogo</h2>
            <p id="gameOverMessage"></p>
            <div id="gameOverStats"></div>
            <div class="button-row">
                <button id="playAgainBtn"><i class="fas fa-sync-alt"></i> Jogar Novamente</button>
                <button id="returnToMenuBtn"><i class="fas fa-home"></i> Menu Principal</button>
            </div>
        </div>
    </div>
    
    <!-- Modal de Pausa -->
    <div id="pauseModal" class="modal">
        <div class="modal-content">
            <h2>Jogo Pausado</h2>
            <div class="button-row">
                <button id="resumeGameBtn"><i class="fas fa-play"></i> Continuar</button>
                <button id="saveGameBtn"><i class="fas fa-save"></i> Salvar Jogo</button>
                <button id="loadGameBtn"><i class="fas fa-folder-open"></i> Carregar Jogo</button>
                <button id="quitGameBtn"><i class="fas fa-times"></i> Sair do Jogo</button>
            </div>
        </div>
    </div>
    
    <!-- Carregamento da biblioteca Howler.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    
    <script>
        // Constantes e vari√°veis do jogo
        const powerups = [
            {name: "x2Dmg", icon: "fa-bolt", description: "Dano dobrado no pr√≥ximo tiro"},
            {name: "+1Vida", icon: "fa-heart", description: "Recupera 1 vida"},
            {name: "Skip", icon: "fa-forward", description: "Pula o turno do oponente"},
            {name: "RemoveBullet", icon: "fa-trash", description: "Remove a pr√≥xima bala"},
            {name: "FutureVision", icon: "fa-eye", description: "V√™ a pr√≥xima bala"}
        ];
        
        // Vari√°veis do jogo
        let playerHealth, aiHealth, maxHealth, round, chamber, currentBullet, cards;
        let skipAI = false, gameOver = false, isPaused = false;
        let x2DmgActive = false;
        let difficulty = "medium";
        let score = 0;
        let currentTheme = "dark";
        let gameStartTime;
        
        // Elementos DOM
        const startScreenEl = document.getElementById("startScreen");
        const gameEl = document.getElementById("game");
        const scoreboardScreenEl = document.getElementById("scoreboardScreen");
        const gameOverModalEl = document.getElementById("gameOverModal");
        const pauseModalEl = document.getElementById("pauseModal");
        const difficultyOptionsEls = document.querySelectorAll(".difficulty-option");
        const themeOptionsEls = document.querySelectorAll(".theme-option");
        
        const playerHealthEl = document.getElementById("playerHealth");
        const aiHealthEl = document.getElementById("aiHealth");
        const playerHealthBarEl = document.getElementById("playerHealthBar");
        const aiHealthBarEl = document.getElementById("aiHealthBar");
        const bulletsLeftEl = document.getElementById("bulletsLeft");
        const roundNumberEl = document.getElementById("roundNumber");
        const cardsDiv = document.getElementById("cards");
        const logDiv = document.getElementById("log");
        const chamberDisplayEl = document.getElementById("chamberDisplay");
        const activeEffectsEl = document.getElementById("activeEffects");
        const gameOverTitleEl = document.getElementById("gameOverTitle");
        const gameOverMessageEl = document.getElementById("gameOverMessage");
        const gameOverStatsEl = document.getElementById("gameOverStats");
        const currentScoreEl = document.getElementById("currentScore");
        const notificationEl = document.getElementById("notification");
        
        // Configura√ß√£o dos sons com Howler.js
        const sounds = {
            shoot: new Howl({
                src: ['https://assets.codepen.io/21542/Gun+Silencer.mp3'],
                volume: 0.5
            }),
            empty: new Howl({
                src: ['https://assets.codepen.io/21542/click.mp3'],
                volume: 0.4
            }),
            card: new Howl({
                src: ['https://assets.codepen.io/21542/cardPlace1.mp3'],
                volume: 0.4
            }),
            win: new Howl({
                src: ['https://assets.codepen.io/21542/success.mp3'],
                volume: 0.5
            }),
            lose: new Howl({
                src: ['https://assets.codepen.io/21542/negative.mp3'],
                volume: 0.5
            }),
            bgMusic: new Howl({
                src: ['https://assets.codepen.io/21542/bensound-enigmatic.mp3'],
                volume: 0.2,
                loop: true
            })
        };
        
        // Fun√ß√µes de utilidade
        function log(msg, className = "") {
            const entry = document.createElement("div");
            entry.className = "log-entry " + className;
            entry.innerHTML = msg;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function showNotification(message, duration = 2000) {
            notificationEl.textContent = message;
            notificationEl.style.opacity = "1";
            setTimeout(() => {
                notificationEl.style.opacity = "0";
            }, duration);
        }
        
        function updateActiveEffects() {
            activeEffectsEl.innerHTML = "";
            
            if (x2DmgActive) {
                const effectSpan = document.createElement("span");
                effectSpan.className = "active-effect effect-x2Dmg";
                effectSpan.innerHTML = '<i class="fas fa-bolt"></i> Dano Dobrado Ativo';
                activeEffectsEl.appendChild(effectSpan);
            }
        }
        
        function rand(a, b) {
            return Math.floor(Math.random() * (b - a + 1)) + a;
        }
        
        function playSound(soundName, volume = 1) {
            if (sounds[soundName]) {
                sounds[soundName].volume(volume);
                sounds[soundName].play();
            }
        }
        
        function updateScore(points) {
            score += points;
            currentScoreEl.textContent = score;
            
            if (points > 0) {
                log(`<span class="score">+${points} pontos!</span>`);
            }
        }
        
        function toggleBgMusic(play) {
            if (play) {
                if (!sounds.bgMusic.playing()) {
                    sounds.bgMusic.play();
                }
            } else {
                sounds.bgMusic.pause();
            }
        }
        
        function addBulletAnimation(index) {
            const bullets = document.querySelectorAll('.bullet');
            if (bullets[index]) {
                bullets[index].classList.add('shot');
                setTimeout(() => {
                    updateChamberDisplay();
                }, 500);
            }
        }
        
        function shakeScreen() {
            gameEl.classList.add('shake');
            setTimeout(() => {
                gameEl.classList.remove('shake');
            }, 500);
        }
        
        // Fun√ß√µes principais do jogo
        function newRound() {
            round++;
            roundNumberEl.textContent = round;
            
            // Gerar balas para o tambor baseado na dificuldade
            let totalBullets, realBulletsPct;
            
            switch(difficulty) {
                case "easy":
                    totalBullets = rand(2, 6);
                    realBulletsPct = 0.3;
                    break;
                case "hard":
                    totalBullets = rand(3, 8);
                    realBulletsPct = 0.7;
                    break;
                default: // medium
                    totalBullets = rand(2, 8);
                    realBulletsPct = 0.5;
            }
            
            const realBullets = Math.max(1, Math.floor(totalBullets * realBulletsPct));
            
            chamber = [];
            for (let i = 0; i < totalBullets; i++) {
                chamber.push(i < realBullets);
            }
            chamber.sort(() => Math.random() - 0.5);
            
            currentBullet = 0;
            bulletsLeftEl.textContent = chamber.length;
            
            // Gerar cartas para o jogador baseado na dificuldade
            cards = [];
            let cardCount;
            
            switch(difficulty) {
                case "easy":
                    cardCount = rand(2, 4);
                    break;
                case "hard":
                    cardCount = rand(0, 2);
                    break;
                default: // medium
                    cardCount = rand(1, 3);
            }
            
            for (let i = 0; i < cardCount; i++) {
                cards.push(powerups[rand(0, powerups.length - 1)].name);
            }
            
            renderCards();
            updateChamberDisplay();
            
            log(`<b>In√≠cio da rodada ${round}</b>. Balas: ${totalBullets} (${realBullets} verdadeiras)`);
            showNotification(`Rodada ${round} - ${realBullets} balas verdadeiras`);
            
            // Adicionar pontos por nova rodada
            updateScore(10 * round);
            
            // Salvar o jogo automaticamente
            saveGameState();
        }
        
        function updateChamberDisplay() {
            chamberDisplayEl.innerHTML = "";
            
            for (let i = 0; i < chamber.length; i++) {
                const bulletEl = document.createElement("div");
                bulletEl.className = "bullet" + (i === currentBullet ? " current" : "");
                bulletEl.textContent = i + 1;
                chamberDisplayEl.appendChild(bulletEl);
            }
        }
        
        function renderCards() {
            cardsDiv.innerHTML = "";
            
            cards.forEach((cardName, index) => {
                const powerup = powerups.find(p => p.name === cardName);
                
                const cardDiv = document.createElement("div");
                cardDiv.className = "card";
                cardDiv.onclick = () => useCard(index);
                
                cardDiv.innerHTML = `
                    <div class="card-inner ${cardName.replace('+', 'Plus')}">
                        <div class="card-front">
                            <div class="card-icon"><i class="fas ${powerup.icon}"></i></div>
                            <div class="card-name">${cardName}</div>
                        </div>
                    </div>
                `;
                
                cardsDiv.appendChild(cardDiv);
            });
            
            if (!cards.length) {
                cardsDiv.innerHTML = "<p>Sem cartas</p>";
            }
        }
        
        function startGame() {
            // Reiniciar vari√°veis
            maxHealth = rand(4, 8);
            playerHealth = aiHealth = maxHealth;
            round = 0;
            gameOver = false;
            isPaused = false;
            x2DmgActive = false;
            score = 0;
            gameStartTime = new Date();
            
            // Atualizar display
            updateHealth();
            updateActiveEffects();
            currentScoreEl.textContent = score;
            log("<b>Novo jogo iniciado!</b>");
            
            // Esconder tela inicial e mostrar jogo
            startScreenEl.style.display = "none";
            scoreboardScreenEl.style.display = "none";
            gameEl.style.display = "block";
            gameOverModalEl.style.display = "none";
            
            // Iniciar m√∫sica de fundo
            toggleBgMusic(true);
            
            // Iniciar primeira rodada
            newRound();
        }
        
        function updateHealth() {
            playerHealthEl.textContent = playerHealth;
            aiHealthEl.textContent = aiHealth;
            
            // Atualizar barras de vida
            const playerPercent = (playerHealth / maxHealth) * 100;
            const aiPercent = (aiHealth / maxHealth) * 100;
            
            playerHealthBarEl.style.width = `${playerPercent}%`;
            aiHealthBarEl.style.width = `${aiPercent}%`;
            
            // Mudar cor baseado na vida
            if (playerPercent <= 25) {
                playerHealthBarEl.style.background = 'linear-gradient(90deg, #f00, #f00)';
            } else if (playerPercent <= 50) {
                playerHealthBarEl.style.background = 'linear-gradient(90deg, #f00, #f80)';
            } else {
                playerHealthBarEl.style.background = 'linear-gradient(90deg, #f00, #ff5500)';
            }
            
            if (aiPercent <= 25) {
                aiHealthBarEl.style.background = 'linear-gradient(90deg, #f00, #f00)';
            } else if (aiPercent <= 50) {
                aiHealthBarEl.style.background = 'linear-gradient(90deg, #f00, #f80)';
            } else {
                aiHealthBarEl.style.background = 'linear-gradient(90deg, #f00, #ff5500)';
            }
        }
        
        function takeBullet() {
            const lethal = chamber[currentBullet];
            addBulletAnimation(currentBullet);
            currentBullet++;
            bulletsLeftEl.textContent = chamber.length - currentBullet;
            return lethal;
        }
        
        function playerShootEnemy() {
            if (gameOver || isPaused) return;
            
            const lethal = takeBullet();
            log("Voc√™ atira no oponente...");
            
            if (lethal) {
                playSound(shootSound);
                shakeScreen();
                
                // Verificar se x2Dmg est√° ativo
                if (x2DmgActive) {
                    aiHealth -= 2;
                    log("Bala verdadeira! <span class='damage'>IA perde 2 de vida (Dano Dobrado).</span>");
                    showNotification("IA perde 2 de vida!");
                    x2DmgActive = false; // Desativar efeito ap√≥s uso
                    updateActiveEffects();
                    updateScore(30); // Mais pontos para tiro com dano dobrado
                } else {
                    aiHealth--;
                    log("Bala verdadeira! <span class='damage'>IA perde 1 de vida.</span>");
                    showNotification("IA perde 1 de vida!");
                    updateScore(20); // Pontos por acertar IA
                }
            } else {
                playSound(emptySound);
                log("Bala falsa!");
                showNotification("Bala falsa!");
            }
            
            updateHealth();
            checkRoundEnd();
            
            if (!gameOver) {
                setTimeout(() => {
                    aiTurn();
                }, 1000);
            }
        }
        
        function playerShootSelf() {
            if (gameOver || isPaused) return;
            
            const lethal = takeBullet();
            log("Voc√™ atira em si mesmo...");
            
            if (lethal) {
                playSound('shoot');
                shakeScreen();
                
                playerHealth--;
                log("Bala verdadeira! <span class='damage'>Voc√™ perde 1 de vida.</span>");
                showNotification("Voc√™ perde 1 de vida!");
                updateHealth();
                checkRoundEnd();
                
                if (!gameOver) {
                    setTimeout(() => {
                        aiTurn();
                    }, 1000);
                }
            } else {
                playSound('empty');
                log("Bala falsa! <span class='heal'>Voc√™ pode agir novamente imediatamente.</span>");
                showNotification("Bala falsa! Aja novamente!");
                updateScore(5); // Pontos por sobreviver tiro em si
                
                if (chamber.length - currentBullet === 0) {
                    checkRoundEnd();
                }
            }
        }
        
        function useCard(index) {
            if (gameOver || isPaused) return;
            
            const cardEl = document.querySelectorAll('.card')[index];
            if (cardEl) {
                cardEl.classList.add('used');
            }
            
            playSound('card');
            
            const card = cards.splice(index, 1)[0];
            log(`Voc√™ usa <b>${card}</b>`);
            
            if (card === "x2Dmg") {
                x2DmgActive = true; // Ativar efeito x2Dmg
                log("Dano dobrado ativado! Pr√≥ximo tiro causar√° 2 de dano.");
                showNotification("Dano dobrado ativado!");
            }
            
            if (card === "+1Vida") {
                playerHealth = Math.min(playerHealth + 1, maxHealth);
                log("Voc√™ <span class='heal'>ganha 1 de vida</span>.");
                showNotification("Voc√™ ganhou 1 de vida!");
                updateScore(15); // Pontos por recuperar vida
            }
            
            if (card === "Skip") {
                skipAI = true;
                log("IA <span class='damage'>perder√° o pr√≥ximo turno</span>.");
                showNotification("IA perder√° o pr√≥ximo turno!");
                updateScore(10); // Pontos por pular turno da IA
            }
            
            if (card === "RemoveBullet") {
                if (currentBullet < chamber.length) {
                    chamber[currentBullet] = false;
                    log("Pr√≥xima bala <span class='heal'>removida (falsa)</span>.");
                    showNotification("Pr√≥xima bala removida!");
                    updateScore(15); // Pontos por remover bala
                }
            }
            
            if (card === "FutureVision") {
                if (currentBullet < chamber.length) {
                    log(`Pr√≥xima bala √© <b>${chamber[currentBullet] ? "verdadeira" : "falsa"}</b>.`);
                    showNotification(`Pr√≥xima bala √© ${chamber[currentBullet] ? "verdadeira" : "falsa"}!`);
                    updateScore(5); // Pontos por vis√£o futura
                }
            }
            
            setTimeout(() => {
                renderCards();
            }, 500);
            
            updateHealth();
            updateActiveEffects();
        }
        
        function aiTurn() {
            if (gameOver || isPaused) return;
            
            if (skipAI) {
                log("IA pula o turno.");
                showNotification("IA pulou o turno!");
                skipAI = false;
                return;
            }
            
            if (chamber.length - currentBullet === 0) {
                checkRoundEnd();
                return;
            }
            
            // Calcular o n√∫mero de balas restantes e a probabilidade
            const remainingBullets = chamber.length - currentBullet;
            
            // Contar quantas balas reais restam (para uso interno da IA)
            let realBulletsLeft = 0;
            for (let i = currentBullet; i < chamber.length; i++) {
                if (chamber[i]) realBulletsLeft++;
            }
            
            // Calcular a probabilidade de uma bala real
            const realBulletProbability = realBulletsLeft / remainingBullets;
            
            // Ajustar agressividade baseado na dificuldade
            let aggressiveness;
            switch(difficulty) {
                case "easy":
                    aggressiveness = 0.3; // Menos prov√°vel de atirar no jogador
                    break;
                case "hard":
                    aggressiveness = 0.7; // Mais prov√°vel de atirar no jogador
                    break;
                default: // medium
                    aggressiveness = 0.5;
            }
            
            // IA toma decis√£o com estrat√©gia avan√ßada
            let action = "shootPlayer";
            let decisionReason = "";
            
            // Fase final do jogo (vida baixa)
            if (aiHealth === 1) {
                // Situa√ß√£o desesperadora - IA com 1 de vida
                if (playerHealth === 1) {
                    // Ambos com 1 de vida - decis√£o cr√≠tica
                    if (realBulletProbability >= 0.5) {
                        // Alta chance de bala real - arriscar atirar em si
                        action = "shootSelf";
                        decisionReason = "situa√ß√£o cr√≠tica, preferindo arriscar";
                    } else {
                        // Baixa chance de bala real - atirar no jogador
                        action = "shootPlayer";
                        decisionReason = "chance favor√°vel para atacar";
                    }
                } else {
                    // Jogador com mais vida - IA precisa ser cautelosa
                    if (realBulletProbability >= 0.4) {
                        // Chance m√©dia-alta de bala real - melhor arriscar em si
                        action = "shootSelf";
                        decisionReason = "risco calculado para sobreviver";
                    } else {
                        // Baixa chance de bala real - atacar
                        action = "shootPlayer";
                        decisionReason = "atacando com baixo risco";
                    }
                }
            } 
            // Fase m√©dia do jogo
            else if (aiHealth <= 3) {
                if (playerHealth < aiHealth) {
                    // IA com vantagem - pode ser mais agressiva
                    if (realBulletProbability >= 0.7) {
                        action = "shootSelf";
                        decisionReason = "evitando alto risco";
                    } else {
                        action = "shootPlayer";
                        decisionReason = "mantendo press√£o ofensiva";
                    }
                } else {
                    // Jogador com vantagem ou igual - IA mais cautelosa
                    if (realBulletProbability >= 0.4) {
                        action = "shootSelf";
                        decisionReason = "tentando for√ßar jogada segura";
                    } else {
                        action = "shootPlayer";
                        decisionReason = "buscando equilibrar o jogo";
                    }
                }
            } 
            // Fase inicial do jogo - IA com boa sa√∫de
            else {
                if (realBulletProbability >= 0.6) {
                    // Alta chance de bala real
                    if (x2DmgActive) {
                        // Se jogador tem dano dobrado ativo, n√£o arriscar
                        action = "shootSelf";
                        decisionReason = "evitando dano dobrado do jogador";
                    } else if (remainingBullets === 1) {
                        // √öltima bala do tambor - IA arrisca para terminar a rodada
                        action = "shootPlayer";
                        decisionReason = "arriscando na √∫ltima bala do tambor";
                    } else {
                        action = "shootSelf";
                        decisionReason = "jogando conservadoramente";
                    }
                } else {
                    // Baixa chance de bala real - jogar agressivamente
                    action = "shootPlayer";
                    decisionReason = "aproveitando probabilidade favor√°vel";
                    
                    // Se for muito baixa, √†s vezes arrisca em si para ganhar tempo
                    if (realBulletProbability <= 0.2 && remainingBullets > 2 && Math.random() < 0.3) {
                        action = "shootSelf";
                        decisionReason = "buscando bala falsa para jogar mais vezes";
                    }
                }
            }
            
            // Aplicar fator de dificuldade
            if (Math.random() < aggressiveness) {
                action = "shootPlayer";
                decisionReason += " (agressivo pela dificuldade)";
            }
            
            // Fator aleat√≥rio para imprevisibilidade (10% de chance de mudar de ideia)
            if (Math.random() < 0.1) {
                action = action === "shootPlayer" ? "shootSelf" : "shootPlayer";
                decisionReason = "mudando de estrat√©gia imprevisivelmente";
            }
            
            // Executar a a√ß√£o
            log(`IA decide ${action === "shootPlayer" ? "atirar em voc√™" : "atirar em si mesma"} (${decisionReason})`);
            
            const lethal = takeBullet();
            
            if (action === "shootPlayer") {
                if (lethal) {
                    playSound('shoot');
                    shakeScreen();
                    
                    playerHealth--;
                    log("IA acertou bala verdadeira! <span class='damage'>Voc√™ perde 1 de vida.</span>");
                    showNotification("Voc√™ perde 1 de vida!");
                } else {
                    playSound('empty');
                    log("Bala falsa da IA.");
                    showNotification("IA errou! Bala falsa.");
                }
            } else {
                if (lethal) {
                    playSound('shoot');
                    shakeScreen();
                    
                    aiHealth--;
                    log("IA tomou bala verdadeira! <span class='damage'>Perde 1 vida.</span>");
                    showNotification("IA perde 1 de vida!");
                    updateScore(15); // Pontos quando IA perde vida
                } else {
                    playSound('empty');
                    log("Bala falsa da IA. Ela age novamente.");
                    showNotification("IA errou! Age novamente.");
                    setTimeout(() => {
                        aiTurn();
                    }, 1000);
                    return;
                }
            }
            
            updateHealth();
            checkRoundEnd();
        }
        
        function checkRoundEnd() {
            if (playerHealth <= 0 || aiHealth <= 0) {
                endGame();
                return;
            }
            
            if (currentBullet >= chamber.length) {
                log("<b>Fim da rodada</b>");
                showNotification("Fim da Rodada");
                setTimeout(() => {
                    newRound();
                }, 1500);
            }
        }
        
        function endGame() {
            gameOver = true;
            let title, message, result;
            
            if (playerHealth <= 0 && aiHealth <= 0) {
                title = "Empate!";
                message = "Ambos os jogadores perderam toda a vida ao mesmo tempo.";
                log("<h2>Empate!</h2>");
                playSound(winSound, 0.3);
                result = "Empate";
            } else if (playerHealth <= 0) {
                title = "Voc√™ Perdeu!";
                message = "A IA venceu desta vez. Tente novamente!";
                log("<h2>Voc√™ perdeu!</h2>");
                playSound(loseSound, 0.3);
                result = "Derrota";
            } else {
                title = "Voc√™ Venceu!";
                message = "Parab√©ns! Voc√™ eliminou a IA.";
                log("<h2>Voc√™ venceu!</h2>");
                playSound(winSound, 0.3);
                result = "Vit√≥ria";
                
                // B√¥nus por vit√≥ria
                updateScore(50);
            }
            
            // Estat√≠sticas finais
            const gameEndTime = new Date();
            const gameTime = Math.floor((gameEndTime - gameStartTime) / 1000);
            const minutes = Math.floor(gameTime / 60);
            const seconds = gameTime % 60;
            
            const stats = `
                <div style="margin: 20px 0; text-align: left;">
                    <p><strong>Pontua√ß√£o Final:</strong> <span class="score">${score}</span></p>
                    <p><strong>Rodadas Jogadas:</strong> ${round}</p>
                    <p><strong>Dificuldade:</strong> ${difficulty === "easy" ? "F√°cil" : (difficulty === "hard" ? "Dif√≠cil" : "M√©dio")}</p>
                    <p><strong>Tempo de Jogo:</strong> ${minutes}m ${seconds}s</p>
                </div>
            `;
            
            // Salvar pontua√ß√£o
            saveScore({
                date: new Date().toLocaleDateString(),
                difficulty: difficulty,
                score: score,
                rounds: round,
                result: result
            });
            
            // Mostrar o modal de fim de jogo
            gameOverTitleEl.textContent = title;
            gameOverMessageEl.textContent = message;
            gameOverStatsEl.innerHTML = stats;
            gameOverModalEl.style.display = "flex";
            
            // Parar m√∫sica de fundo
            toggleBgMusic(false);
        }
        
        function togglePause() {
            if (gameOver) return;
            
            isPaused = !isPaused;
            
            if (isPaused) {
                gameEl.classList.add('paused');
                pauseModalEl.style.display = "flex";
                toggleBgMusic(false);
            } else {
                gameEl.classList.remove('paused');
                pauseModalEl.style.display = "none";
                toggleBgMusic(true);
            }
        }
        
        function showScoreboard() {
            startScreenEl.style.display = "none";
            gameEl.style.display = "none";
            scoreboardScreenEl.style.display = "block";
            
            // Atualizar tabela de pontua√ß√µes
            const scores = getScores();
            const tbody = document.getElementById("scoreboardTableBody");
            tbody.innerHTML = "";
            
            if (scores.length === 0) {
                const row = document.createElement("tr");
                row.innerHTML = `<td colspan="6" style="text-align: center;">Sem pontua√ß√µes registradas</td>`;
                tbody.appendChild(row);
            } else {
                scores.sort((a, b) => b.score - a.score)
                    .forEach((s, i) => {
                        const row = document.createElement("tr");
                        row.innerHTML = `
                            <td>${i + 1}</td>
                            <td>${s.date}</td>
                            <td>${s.difficulty === "easy" ? "F√°cil" : (s.difficulty === "hard" ? "Dif√≠cil" : "M√©dio")}</td>
                            <td>${s.score}</td>
                            <td>${s.rounds}</td>
                            <td>${s.result}</td>
                        `;
                        tbody.appendChild(row);
                    });
            }
        }
        
        // Sistema de salvamento
        function saveGameState() {
            if (gameOver) return;
            
            const gameState = {
                playerHealth,
                aiHealth,
                maxHealth,
                round,
                chamber,
                currentBullet,
                cards,
                skipAI,
                x2DmgActive,
                difficulty,
                score,
                theme: currentTheme
            };
            
            localStorage.setItem("roletaRussaState", JSON.stringify(gameState));
            
            return gameState;
        }
        
        function loadGameState() {
            const savedState = localStorage.getItem("roletaRussaState");
            
            if (!savedState) {
                showNotification("Nenhum jogo salvo encontrado!");
                return false;
            }
            
            try {
                const gameState = JSON.parse(savedState);
                
                playerHealth = gameState.playerHealth;
                aiHealth = gameState.aiHealth;
                maxHealth = gameState.maxHealth;
                round = gameState.round;
                chamber = gameState.chamber;
                currentBullet = gameState.currentBullet;
                cards = gameState.cards;
                skipAI = gameState.skipAI;
                x2DmgActive = gameState.x2DmgActive;
                difficulty = gameState.difficulty;
                score = gameState.score;
                
                // Atualizar tema se for diferente
                if (gameState.theme && gameState.theme !== currentTheme) {
                    setTheme(gameState.theme);
                }
                
                // Atualizar interface
                updateHealth();
                updateActiveEffects();
                renderCards();
                updateChamberDisplay();
                roundNumberEl.textContent = round;
                bulletsLeftEl.textContent = chamber.length - currentBullet;
                currentScoreEl.textContent = score;
                
                log("<b>Jogo carregado com sucesso!</b>");
                showNotification("Jogo carregado!");
                
                // Fechar modal de pausa se estiver aberto
                isPaused = false;
                gameEl.classList.remove('paused');
                pauseModalEl.style.display = "none";
                
                // Iniciar m√∫sica de fundo
                toggleBgMusic(true);
                
                return true;
            } catch (e) {
                console.error("Erro ao carregar jogo:", e);
                showNotification("Erro ao carregar jogo!");
                return false;
            }
        }
        
        function saveScore(scoreData) {
            const scores = getScores();
            scores.push(scoreData);
            
            // Limitar a 10 pontua√ß√µes salvas
            while (scores.length > 10) {
                scores.shift();
            }
            
            localStorage.setItem("roletaRussaScores", JSON.stringify(scores));
        }
        
        function getScores() {
            const savedScores = localStorage.getItem("roletaRussaScores");
            return savedScores ? JSON.parse(savedScores) : [];
        }
        
        function setDifficulty(diff) {
            difficulty = diff;
            
            // Atualizar sele√ß√£o visual
            difficultyOptionsEls.forEach(el => {
                if (el.dataset.difficulty === diff) {
                    el.classList.add('selected');
                } else {
                    el.classList.remove('selected');
                }
            });
        }
        
        function setTheme(theme) {
            // Remover tema atual
            document.body.classList.remove('theme-dark', 'theme-western', 'theme-future', 'theme-cyber');
            
            // Adicionar novo tema
            document.body.classList.add('theme-' + theme);
            currentTheme = theme;
            
            // Atualizar sele√ß√£o visual
            themeOptionsEls.forEach(el => {
                if (el.dataset.theme === theme) {
                    el.classList.add('selected');
                } else {
                    el.classList.remove('selected');
                }
            });
        }
        
        // Event Listeners
        document.getElementById("shootEnemy").addEventListener("click", playerShootEnemy);
        document.getElementById("shootSelf").addEventListener("click", playerShootSelf);
        document.getElementById("pauseGame").addEventListener("click", togglePause);
        document.getElementById("newGame").addEventListener("click", startGame);
        
        document.getElementById("resumeGameBtn").addEventListener("click", togglePause);
        document.getElementById("saveGameBtn").addEventListener("click", () => {
            saveGameState();
            showNotification("Jogo salvo com sucesso!");
        });
        document.getElementById("loadGameBtn").addEventListener("click", loadGameState);
        document.getElementById("quitGameBtn").addEventListener("click", () => {
            toggleBgMusic(false);
            gameEl.style.display = "none";
            pauseModalEl.style.display = "none";
            startScreenEl.style.display = "flex";
        });
        
        document.getElementById("playAgainBtn").addEventListener("click", () => {
            gameOverModalEl.style.display = "none";
            startGame();
        });
        document.getElementById("returnToMenuBtn").addEventListener("click", () => {
            gameOverModalEl.style.display = "none";
            gameEl.style.display = "none";
            startScreenEl.style.display = "flex";
        });
        
        document.getElementById("startGameBtn").addEventListener("click", startGame);
        document.getElementById("showScoreboardBtn").addEventListener("click", showScoreboard);
        document.getElementById("backToMenuBtn").addEventListener("click", () => {
            scoreboardScreenEl.style.display = "none";
            startScreenEl.style.display = "flex";
        });
        
        // Listeners para dificuldade
        difficultyOptionsEls.forEach(el => {
            el.addEventListener("click", () => {
                setDifficulty(el.dataset.difficulty);
            });
        });
        
        // Listeners para tema
        themeOptionsEls.forEach(el => {
            el.addEventListener("click", () => {
                setTheme(el.dataset.theme);
            });
        });
        
        // Verificar se h√° jogo salvo ao carregar a p√°gina
        window.addEventListener("load", () => {
            const savedState = localStorage.getItem("roletaRussaState");
            if (savedState) {
                document.getElementById("loadGameBtn").disabled = false;
            } else {
                document.getElementById("loadGameBtn").disabled = true;
            }
        });
    </script>
</body>
</html>